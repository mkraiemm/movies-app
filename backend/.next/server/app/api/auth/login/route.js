"use strict";(()=>{var e={};e.id=873,e.ids=[873],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},4300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},3837:e=>{e.exports=require("util")},2675:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>O,originalPathname:()=>A,patchFetch:()=>j,requestAsyncStorage:()=>y,routeModule:()=>m,serverHooks:()=>v,staticGenerationAsyncStorage:()=>g,staticGenerationBailout:()=>x});var s={};r.r(s),r.d(s,{OPTIONS:()=>w,POST:()=>f});var i=r(5419),a=r(9108),n=r(9678),o=r(8070),u=r(5643),l=r(2002);let c={"Access-Control-Allow-Origin":"http://localhost:3000","Access-Control-Allow-Methods":"GET, POST, PUT, DELETE, OPTIONS","Access-Control-Allow-Headers":"Content-Type, Authorization","Access-Control-Max-Age":"86400"};async function p(e,t){if("OPTIONS"===e.method)return new o.Z(null,{status:204,headers:c});let r=await t(e);return Object.entries(c).forEach(([e,t])=>{r.headers.set(e,t)}),r}async function d(){return new o.Z(null,{status:204,headers:c})}async function h(e){try{let{email:t,password:r}=await e.json(),s=(await u.t.getUsers()).find(e=>e.email===t&&e.password===r);if(!s)return o.Z.json({error:"Invalid credentials"},{status:401});let i=(0,l.R)(s.id);return o.Z.json({user:{id:s.id,email:s.email},token:i})}catch(e){return o.Z.json({error:"Invalid request"},{status:400})}}async function f(e){return p(e,h)}async function w(){return d()}let m=new i.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/auth/login/route",pathname:"/api/auth/login",filename:"route",bundlePath:"app/api/auth/login/route"},resolvedPagePath:"D:\\Upwork\\Movies App\\movies-app\\backend\\src\\app\\api\\auth\\login\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:y,staticGenerationAsyncStorage:g,serverHooks:v,headerHooks:O,staticGenerationBailout:x}=m,A="/api/auth/login/route";function j(){return(0,n.patchFetch)({serverHooks:v,staticGenerationAsyncStorage:g})}},2002:(e,t,r)=>{r.d(t,{R:()=>a,W:()=>n});var s=r(6082);let i="your-secret-key";function a(e){return(0,s.sign)({userId:e},i,{expiresIn:"7d"})}function n(e){try{return(0,s.verify)(e,i)}catch{return null}}},5643:(e,t,r)=>{r.d(t,{t:()=>l});let s=require("fs");var i=r(1017),a=r.n(i);let n=a().join(process.cwd(),"data"),o=a().join(n,"users.json"),u=a().join(n,"movies.json");(async function(){try{await s.promises.mkdir(n,{recursive:!0}),await s.promises.writeFile(o,"[]",{flag:"wx"}),await s.promises.writeFile(u,"[]",{flag:"wx"})}catch(e){}})();let l={getUsers:async()=>JSON.parse(await s.promises.readFile(o,"utf8")),async saveUsers(e){await s.promises.writeFile(o,JSON.stringify(e,null,2))},getMovies:async()=>JSON.parse(await s.promises.readFile(u,"utf8")),async saveMovies(e){await s.promises.writeFile(u,JSON.stringify(e,null,2))}}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[638,206,82],()=>r(2675));module.exports=s})();